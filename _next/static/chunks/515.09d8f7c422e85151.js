(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[515],{8588:function(e,t,n){e.exports=n(3035)},1175:function(e,t,n){"use strict";var r,o;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(6443)},6515:function(e,t,n){"use strict";n.r(t),n.d(t,{DefaultDbPath:function(){return g},DefaultQuery:function(){return y},Input:function(){return m},QueryKey:function(){return v},UrlKey:function(){return p},default:function(){return b}});var r=n(1527),o=n(959),u=n(8699),s=n(4334),l=n.n(s),c=n(9695),i=n(5923),a=n(6164);function f(e){let{result:t}=e;return t&&(0,a.g_)(e=>(0,r.jsxs)("div",{className:l().sqlError,children:[(0,r.jsx)("h2",{children:"Error"}),(0,r.jsx)("pre",{children:e.message})]}),e=>(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:(null==e?void 0:e.length)?(0,i.XP)(e[0]).map((e,t)=>(0,r.jsx)("th",{children:e},t)):null})}),(0,r.jsx)("tbody",{children:null==e?void 0:e.map((e,t)=>(0,r.jsx)("tr",{children:(0,i.VO)(e).map((e,t)=>(0,r.jsx)("td",{children:e},t))},t))})]}))(t)}var d=n(1358),h=n(1175);let p="sql-db-url",v="sql-query";function m(e){let{label:t,defaultValue:n,buttons:u,...s}=e,[c,i]=(0,o.useState)(n);(0,o.useEffect)(()=>{i(n)},[n]);let[a,f]=(0,o.useState)(null),d=(0,o.createRef)();return(0,o.useEffect)(()=>{d.current&&(console.log("set initial scrollHeight"),f(d.current.scrollHeight))},[d.current]),(0,r.jsxs)("div",{className:l().control,children:[(0,r.jsxs)("label",{children:[t,(0,r.jsx)("textarea",{ref:d,style:a?{height:"".concat(a,"px")}:{},value:c,onInput:e=>{f(e.target.scrollHeight)},onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.code&&e.shiftKey&&(e.preventDefault(),u[0].cb(c))},...s})]}),u.map(e=>{let{value:t,cb:n}=e;return(0,r.jsx)("input",{type:"button",value:t,className:l().updateButton,onClick:()=>{n(c)}},t)})]})}let g=function(){let e=(0,d.b)(),t=h.env.S3_DBS?"https://nj-crashes.s3.amazonaws.com/njdot/data":"".concat(e,"/njdot");return{crashes:"".concat(t,"/crashes.db"),occupants:"".concat(t,"/occupants.db"),pedestrians:"".concat(t,"/pedestrians.db"),vehicles:"".concat(t,"/vehicles.db"),drivers:"".concat(t,"/drivers.db"),cmym:"".concat(t,"/cmym.db"),cmymc:"".concat(t,"/cmymc.db")}}().crashes,y="select * from crashes where id=100000";function b(){let[e,t]=(0,u.Z)(p,{defaultValue:"".concat(g)}),[n,s]=(0,u.Z)(v,{defaultValue:y}),[l,i]=(0,o.useState)(65536),[a,d]=(0,o.useState)(null),h=null;try{h=(0,c.o8)({url:e,requestChunkSize:l,setResult:d})}catch(e){console.error("Caught error:",e)}return(0,r.jsxs)("div",{children:[(0,r.jsx)(m,{label:"DB URL:",buttons:[{value:"Update",cb:e=>{console.log("Updating URL:",e),t(e)}}],defaultValue:e}),(0,r.jsx)(m,{label:"Query:",buttons:[{value:"Run",cb:e=>{if(s(e),h){let t=e.split(";\n\n");t.length>1?(console.log("Running ".concat(t.length," queries")),t.reduce((e,t)=>h&&e?e.then(()=>{var e;return console.log("Running query:",t),h&&(null!==(e=h(t))&&void 0!==e?e:Promise.resolve())}):null,Promise.resolve())):(console.log("Running query:",e),h(e))}}},{value:"Explain",cb:e=>{s(e);let t="explain query plan ".concat(e);console.log("Running query:",t),h&&h(t)}}],defaultValue:n}),(0,r.jsx)(f,{result:a})]})}},4334:function(e){e.exports={control:"sql-repl_control__baLnI"}},6443:function(e){!function(){var t={229:function(e){var t,n,r,o=e.exports={};function u(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===u||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:u}catch(e){t=u}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var c=[],i=!1,a=-1;function f(){i&&r&&(i=!1,r.length?c=r.concat(c):a=-1,c.length&&d())}function d(){if(!i){var e=l(f);i=!0;for(var t=c.length;t;){for(r=c,c=[];++a<t;)r&&r[a].run();a=-1,t=c.length}r=null,i=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new h(e,t)),1!==c.length||i||l(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var u=n[e]={exports:{}},s=!0;try{t[e](u,u.exports,r),s=!1}finally{s&&delete n[e]}return u.exports}r.ab="//";var o=r(229);e.exports=o}()},8699:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(959);let o=new Map,u=new Set;function s(e){for(let t of[...u])t(e)}function l(e){try{return e()}catch(e){return}}var c=function(e,t){let[n]=(0,r.useState)(null==t?void 0:t.defaultValue);if("undefined"==typeof window)return[n,()=>{},{isPersistent:!0,removeItem:()=>{}}];let c=null==t?void 0:t.serializer;return function(e,t,n=!0,c=function(e){return"undefined"===e?void 0:JSON.parse(e)},i=JSON.stringify){o.has(e)||void 0===t||null!==l(()=>sessionStorage.getItem(e))||l(()=>sessionStorage.setItem(e,i(t)));let a=(0,r.useRef)({item:null,parsed:t}),f=(0,r.useSyncExternalStore)((0,r.useCallback)(t=>{let n=n=>{e===n&&t()};return u.add(n),()=>{u.delete(n)}},[e]),()=>{var n;let r=null!==(n=l(()=>sessionStorage.getItem(e)))&&void 0!==n?n:null;if(o.has(e))a.current={item:r,parsed:o.get(e)};else if(r!==a.current.item){let e;try{e=null===r?t:c(r)}catch(n){e=t}a.current={item:r,parsed:e}}return a.current.parsed},()=>t),d=(0,r.useCallback)(t=>{let n=t instanceof Function?t(a.current.parsed):t;try{sessionStorage.setItem(e,i(n)),o.delete(e)}catch(t){o.set(e,n)}s(e)},[e,i]);return(0,r.useEffect)(()=>{if(!n)return;let t=t=>{t.storageArea===l(()=>sessionStorage)&&t.key===e&&s(e)};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[e,n]),(0,r.useMemo)(()=>[f,d,{isPersistent:f===t||!o.has(e),removeItem(){l(()=>sessionStorage.removeItem(e)),o.delete(e),s(e)}}],[e,d,f,t])}(e,n,null==t?void 0:t.storageSync,null==c?void 0:c.parse,null==c?void 0:c.stringify)}},1358:function(e,t,n){"use strict";n.d(t,{b:function(){return u}});var r=n(8588);let o=r.default||r;function u(){let{publicRuntimeConfig:e}=o();if(!e)return"";let{basePath:t=""}=e;return t}}}]);