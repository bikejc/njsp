(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{59938:function(e,t,n){"use strict";n.r(t),n.d(t,{DefaultDbPath:function(){return b},DefaultQuery:function(){return g},Input:function(){return v},QueryKey:function(){return p},UrlKey:function(){return f},default:function(){return j}});var r=n(11527),l=n(50959),c=n(8699),s=n(84334),u=n.n(s),a=n(68325),o=n(23007),i=n(56164);function d(e){let{result:t}=e;return t&&(0,i.g_)(e=>(0,r.jsxs)("div",{className:u().sqlError,children:[(0,r.jsx)("h2",{children:"Error"}),(0,r.jsx)("pre",{children:e.message})]}),e=>(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:(null==e?void 0:e.length)?(0,o.XP)(e[0]).map((e,t)=>(0,r.jsx)("th",{children:e},t)):null})}),(0,r.jsx)("tbody",{children:null==e?void 0:e.map((e,t)=>(0,r.jsx)("tr",{children:(0,o.VO)(e).map((e,t)=>(0,r.jsx)("td",{children:e},t))},t))})]}))(t)}var h=n(41796);let f="sql-db-url",p="sql-query";function v(e){let{label:t,defaultValue:n,buttons:c,...s}=e,[a,o]=(0,l.useState)(n);(0,l.useEffect)(()=>{o(n)},[n]);let[i,d]=(0,l.useState)(null),h=(0,l.createRef)();return(0,l.useEffect)(()=>{h.current&&(console.log("set initial scrollHeight"),d(h.current.scrollHeight))},[h.current]),(0,r.jsxs)("div",{className:u().control,children:[(0,r.jsxs)("label",{children:[t,(0,r.jsx)("textarea",{ref:h,style:i?{height:"".concat(i,"px")}:{},value:a,onInput:e=>{d(e.target.scrollHeight)},onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"===e.code&&e.shiftKey&&(e.preventDefault(),c[0].cb(a))},...s})]}),c.map(e=>{let{value:t,cb:n}=e;return(0,r.jsx)("input",{type:"button",value:t,className:u().updateButton,onClick:()=>{n(a)}},t)})]})}let b=(0,h.mB)().crashes,g="select * from crashes where id=100000";function j(){let[e,t]=(0,c.Z)(f,{defaultValue:"".concat(b)}),[n,s]=(0,c.Z)(p,{defaultValue:g}),[u,o]=(0,l.useState)(65536),[i,h]=(0,l.useState)(null),j=null;try{j=(0,a.o8)({url:e,requestChunkSize:u,setResult:h})}catch(e){console.error("Caught error:",e)}return(0,r.jsxs)("div",{children:[(0,r.jsx)(v,{label:"DB URL:",buttons:[{value:"Update",cb:e=>{console.log("Updating URL:",e),t(e)}}],defaultValue:e}),(0,r.jsx)(v,{label:"Query:",buttons:[{value:"Run",cb:e=>{if(s(e),j){let t=e.split(";\n\n");t.length>1?(console.log("Running ".concat(t.length," queries")),t.reduce((e,t)=>j&&e?e.then(()=>{var e;return console.log("Running query:",t),j&&(null!==(e=j(t))&&void 0!==e?e:Promise.resolve())}):null,Promise.resolve())):(console.log("Running query:",e),j(e))}}},{value:"Explain",cb:e=>{s(e);let t="explain query plan ".concat(e);console.log("Running query:",t),j&&j(t)}}],defaultValue:n}),(0,r.jsx)(d,{result:i})]})}},41796:function(e,t,n){"use strict";n.d(t,{Iv:function(){return s},jy:function(){return c},mB:function(){return u}});var r=n(21358),l=n(62400);let c="https://nj.gov/njsp/info/fatalacc/",s="https://www.state.nj.us/transportation/refdata/accident/rawdata01-current.shtm";function u(){let e=l.env.S3_DBS?"https://nj-crashes.s3.amazonaws.com/njdot/data":"".concat((0,r.b)(),"/njdot");return{crashes:"".concat(e,"/crashes.db"),occupants:"".concat(e,"/occupants.db"),pedestrians:"".concat(e,"/pedestrians.db"),vehicles:"".concat(e,"/vehicles.db"),drivers:"".concat(e,"/drivers.db"),cmym:"".concat(e,"/cmym.db"),cmymc:"".concat(e,"/cmymc.db")}}},84334:function(e){e.exports={control:"sql-repl_control__baLnI"}}}]);