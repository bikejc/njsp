(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[382],{2382:function(e,t,n){"use strict";n.d(t,{Z:function(){return eb}});var c=n(1527),s=n(4589),l=n.n(s),a=n(959),r=n(6164),o=n(1109),i=n.n(o),d=n(2936),u=n(2188),h=n(3721),m=n(2083),p=n(2842),f=n(8699),j=n(2875),x=n.n(j),g=n(2003),v=n(7564),y=n(5595);let _=[10,20,50],b=_[0],w=e=>"".concat(e,"-per-page"),N=e=>"".concat(e,"-page"),I=e=>"".concat(e,"-before"),M=RegExp("(?<m>\\d\\d?)\\/(?<d>\\d\\d?)\\/(?<y>\\d\\d)"),S=RegExp("(?<y>\\d\\d\\d\\d)-(?<m>\\d\\d)-(?<d>\\d\\d)");function Z(e){let{page:t,setPage:n,perPage:s,setPerPage:l,total:r}=e,o=(0,a.useMemo)(()=>Math.floor(r/s),[r,s]),[f,j]=(0,a.useState)((t+1).toString()),[x,g]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{j((t+1).toString()),g(!1)},[t]),(0,c.jsxs)("div",{className:i().tablePagination,children:[(0,c.jsxs)("label",{className:i().curPage,children:[t*s+1,"-",(0,p.VV)(r,(t+1)*s)," of ",r.toLocaleString()]}),(0,c.jsxs)("label",{className:i().pageNum,children:["Page:",(0,c.jsx)("input",{className:x?i().dirty:"",type:"number",value:f,onChange:e=>{let c=e.target.value||"";j(c);let s=parseInt(c)-1;if(!s&&0!==s||s<0||s>o){g(!0);return}s===t&&x&&g(!1),console.log("onPageChange:",e,s),n(s)}})]}),(0,c.jsxs)("label",{className:i().pageSize,children:["Page size:",(0,c.jsx)("select",{value:s,onChange:e=>{let c=parseInt(e.target.value);console.log("onRowsPerPageChange:",e,c),l(c),n((0,p.GW)(t*s/c))},children:_.map(e=>(0,c.jsx)("option",{children:e},e))})]}),(0,c.jsxs)("span",{className:i().pageCount,children:[(0,c.jsx)("button",{disabled:0===t,onClick:()=>{console.log("⇽: page 0"),n(0)},children:(0,c.jsx)(d.Z,{})}),(0,c.jsx)("button",{disabled:0===t,onClick:()=>{console.log("⇽: page ".concat(t-1)),n(t-1)},children:(0,c.jsx)(u.Z,{})}),(0,c.jsx)("button",{disabled:t===o,onClick:()=>{console.log("⇾: page ".concat(t+1)),n(t+1)},children:(0,c.jsx)(h.Z,{})}),(0,c.jsx)("button",{disabled:t===o,onClick:()=>{console.log("⇾: page ".concat(o)),n(o)},children:(0,c.jsx)(m.Z,{})})]})]})}let C="America/New_York";function k(e){let{cur:t,disabled:n,add:s,unit:a,Icon:r,setBefore:o,className:d}=e;return(0,c.jsx)(y.Z,{title:s?"Forward 1 ".concat(a):"Back 1 ".concat(a),children:(0,c.jsx)("span",{children:(0,c.jsx)("button",{disabled:n,onClick:()=>{let e=l().tz(t,C),n=(e=s?e.add(1,a):e.subtract(1,a)).format("YYYY-MM-DD");console.log("new date: ".concat(n)),o(n)},children:(0,c.jsx)(r,{className:"".concat(null!=d?d:""," ").concat(s?"":i().back)})})})})}function P(e){let{before:t,setBefore:n,start:s,end:r,perPage:o,setPerPage:d,total:u}=e;console.log("DatePagination: before",t,"end:",r);let[p,f]=(0,a.useState)(t),[j,b]=(0,a.useState)(!1),w=(0,a.useMemo)(()=>l().tz(t,C).format("M/D/YY"),[t]);(0,a.useEffect)(()=>{f(w),b(!1)},[t,w]);let N=(0,a.useMemo)(()=>t>=(null!=r?r:x()("%Y-%m-%d",new Date)),[t,r]);return(0,c.jsxs)("div",{className:i().tablePagination,children:[(0,c.jsxs)("label",{className:i().curPage,children:[o," crashes before ",w]}),(0,c.jsxs)("label",{className:i().curPage,children:[u.toLocaleString()," total"]}),(0,c.jsxs)("label",{className:i().beforeDate,children:["Before:",(0,c.jsx)("input",{className:j?i().dirty:"",type:"text",value:p,onChange:e=>{let c=e.target.value||"";f(c);let s=c.match(M);if(!s){b(!0);return}let{y:l,m:a,d:o}=s.groups,i="20".concat(l,"-").concat(a.padStart(2,"0"),"-").concat(o.padStart(2,"0"));r&&i>r&&(i=r),c==t&&j&&b(!1),console.log('new "before" date:',i),n(i)}})]}),(0,c.jsxs)("label",{className:i().pageSize,children:["Page size:",(0,c.jsx)("select",{value:o,onChange:e=>{let t=parseInt(e.target.value);console.log("onRowsPerPageChange:",e,t),d(t)},children:_.map(e=>(0,c.jsx)("option",{children:e},e))})]}),(0,c.jsxs)("span",{className:i().pageCount,children:[(0,c.jsx)(k,{cur:t,Icon:g.Z,add:!1,unit:"year",setBefore:n}),(0,c.jsx)(k,{cur:t,Icon:v.Z,add:!1,unit:"month",setBefore:n,className:i().reduce}),(0,c.jsx)(k,{cur:t,Icon:h.Z,add:!1,unit:"day",setBefore:n}),(0,c.jsx)(k,{cur:t,Icon:h.Z,add:!0,unit:"day",setBefore:n,disabled:N}),(0,c.jsx)(k,{cur:t,Icon:v.Z,add:!0,unit:"month",setBefore:n,disabled:N,className:i().reduce}),(0,c.jsx)(k,{cur:t,Icon:g.Z,add:!0,unit:"year",setBefore:n,disabled:N}),(0,c.jsx)(y.Z,{title:"Seek to end (".concat(r,")"),children:(0,c.jsx)("button",{disabled:N,onClick:()=>{console.log("⇾: end",r),n(null!=r?r:x()("%Y-%m-%d",new Date))},children:(0,c.jsx)(m.Z,{})})})]})]})}var D=n(8325);function z(e){let{maxBytesToRead:t=20971520,...n}=e;return D.id({maxBytesToRead:t,...n})}var L=n(3007);let B={"Serious Injuries":"If victim has a serious non-fatal injury which includes:\n• Severe laceration resulting in exposure of underlying tissues/muscle/organs or resulting in significant loss of blood\n• Broken or distorted extremity (arm or leg)\n• Crush injuries\n• Suspected skull, chest or abdominal injury other than bruises or minor lacerations\n• Significant burns (second and third degree burns over 10% or more of the body)\n• Unconsciousness when taken from the crash scene\n• Paralysis","Minor Injuries":"An evident injury, other than fatal and serious injuries. Examples include lump on the head, abrasions, bruises, minor lacerations (cuts on the skin surface with minimal bleeding and no exposure of deeper tissue/muscle).","Other Reported Injuries":"Reported injury that is not fatal, serious or minor. Examples include momentary loss of consciousness, claim of injury, limping, or complaint of pain or nausea. Possible injuries are those which are reported by the person or are indicated by his/her behavior, but no wounds or injuries are readily evident."},T={k:0,fc:0,si:0,sic:0,mi:0,mic:0,pi:0,pic:0,ni:0,nic:0};function E(e){let t={...T},n={};return e.forEach(e=>{let{y:c,condition:s,total:l,num_crashes:a}=e;c in n||(n[c]={...T});let r=[null,"k","si","mi","pi","ni"][s];n[c][r]+=l,t[r]+=l;let o=[null,"fc","sic","mic","pic","nic"][s];n[c][o]+=a,t[o]+=a}),n.totals=t,n}var Y=n(9622),A=n(6665),V=n.n(A);function F(e){let{enterTouchDelay:t=0,leaveTouchDelay:n=3e3,enterNextDelay:s=0,offset:l=14,arrow:a=!0,...r}=e;return(0,c.jsx)(y.Z,{arrow:a,slotProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-l]}}]}},enterTouchDelay:t,leaveTouchDelay:n,enterNextDelay:s,...r})}function H(e){let{className:t,style:n,title:s}=e,l=(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"14 5 70 88",className:"".concat(V().icon," ").concat(V().driver," ").concat(null!=t?t:""),style:n,children:[s&&(0,c.jsx)("title",{children:s}),(0,c.jsxs)("g",{transform:"translate(0,12)",children:[(0,c.jsx)("path",{d:"M62.3,47.8c-11.7,0-21.1,9.5-21.1,21.1S50.7,90,62.3,90s21.1-9.5,21.1-21.1S74,47.8,62.3,47.8z M49.9,56.5   c3.3-3.3,7.7-5.2,12.4-5.2s9.1,1.8,12.4,5.2c1.1,1.1,2.1,2.4,2.9,3.8L68,64.7c-1.3-1.7-3.3-2.9-5.7-2.9c-2.3,0-4.4,1.1-5.7,2.9   L47,60.2C47.8,58.9,48.7,57.6,49.9,56.5z M59.4,86.2c-3.6-0.6-6.9-2.3-9.5-4.9c-3.3-3.3-5.2-7.7-5.2-12.4c0-1.1,0.1-2.2,0.3-3.2   l10.3,2.8c0,0.1,0,0.3,0,0.4c0,3.2,2.1,5.9,5.1,6.8L59.4,86.2z M58.8,68.9c0-1.9,1.6-3.5,3.5-3.5c1.9,0,3.5,1.6,3.5,3.5   s-1.6,3.5-3.5,3.5C60.4,72.4,58.8,70.8,58.8,68.9z M74.8,81.3c-2.6,2.6-5.9,4.3-9.5,4.9l-0.9-10.6c2.9-0.9,5.1-3.6,5.1-6.8   c0-0.2,0-0.3,0-0.4l10.3-2.8c0.2,1,0.3,2.1,0.3,3.2C79.9,73.6,78.1,78,74.8,81.3z"}),(0,c.jsx)("circle",{cx:"41.2",cy:"24.4",r:"14.4"}),(0,c.jsx)("path",{d:"M61.9,46.4c-2.4-3.9-5.8-7.1-9.8-9.1c-2.9,2.5-6.7,4-10.8,4c-4.1,0-7.9-1.5-10.8-3.9c-7.9,4.1-13.4,12.3-13.8,22   c0,0,0,8.1,0,8.2c0,3.3,10.6,6,23.7,6.1c-0.3-1.5-0.5-3.1-0.5-4.7C39.8,56.6,49.7,46.6,61.9,46.4z"})]})]});return s?(0,c.jsx)(F,{title:s,children:l}):l}function R(e){let{className:t,style:n,title:s}=e,l=(0,c.jsx)("svg",{viewBox:"3 0 25 30",className:"".concat(V().icon," ").concat(V().passenger," ").concat(null!=t?t:""),style:n,children:(0,c.jsxs)("g",{transform:"translate(15.5 14)",children:[(0,c.jsxs)("g",{transform:"translate(-18 -15)",children:[(0,c.jsx)("circle",{cx:"17.94653",cy:"7.35815",r:"5.35815"}),(0,c.jsx)("path",{d:"M7.8689,20.46265V28.469A1.53531,1.53531,0,0,0,9.39966,30h14.3291L10.3335,16.58936A4.26837,4.26837,0,0,0,7.8689,20.46265Z M28.01538,28.469V20.46265A4.27642,4.27642,0,0,0,23.72876,16.176H14.2373L27.60205,29.52539A1.5925,1.5925,0,0,0,28.01538,28.469Z"})]}),(0,c.jsxs)("g",{transform:"scale(-1 1),translate(-18 -15)",children:[(0,c.jsx)("circle",{cx:"17.94653",cy:"7.35815",r:"5.35815"}),(0,c.jsx)("path",{d:"M7.8689,20.46265V28.469A1.53531,1.53531,0,0,0,9.39966,30h14.3291L10.3335,16.58936A4.26837,4.26837,0,0,0,7.8689,20.46265Z M28.01538,28.469V20.46265A4.27642,4.27642,0,0,0,23.72876,16.176H14.2373L27.60205,29.52539A1.5925,1.5925,0,0,0,28.01538,28.469Z"})]})]})});return s?(0,c.jsx)(F,{title:s,children:l}):l}function q(e){let{className:t,style:n,title:s}=e,l=(0,c.jsxs)("svg",{viewBox:"5.5 0 25 30",className:"".concat(V().icon," ").concat(V().passenger," ").concat(null!=t?t:""),style:n,children:[(0,c.jsx)("circle",{cx:"17.94653",cy:"7.35815",r:"5.35815"}),(0,c.jsx)("path",{d:"M7.8689,20.46265V28.469A1.53531,1.53531,0,0,0,9.39966,30h14.3291L10.3335,16.58936A4.26837,4.26837,0,0,0,7.8689,20.46265Z"}),(0,c.jsx)("path",{d:"M28.01538,28.469V20.46265A4.27642,4.27642,0,0,0,23.72876,16.176H14.2373L27.60205,29.52539A1.5925,1.5925,0,0,0,28.01538,28.469Z"})]});return s?(0,c.jsx)(F,{title:s,children:l}):l}function U(e){let{className:t,style:n,title:s}=e,l=(0,c.jsx)("svg",{viewBox:"15 0 70 100",className:"".concat(V().icon," ").concat(V().pedestrian," ").concat(null!=t?t:""),style:n,children:(0,c.jsxs)("g",{children:[(0,c.jsx)("path",{d:"M63.3,68.2l-7,11.2l5.4,14.7c0.8,2.1,2.8,3.4,4.9,3.4c0.6,0,1.2-0.1,1.8-0.3c2.7-1,4.1-4,3.1-6.7L63.3,68.2z"}),(0,c.jsx)("path",{d:"M78.9,42.4l-5.8-8.5c-1.6-2.3-3.9-4.1-6.5-5.1c-10.6-4.1-12-4-13-4l-7.5,0.5c-2.1,0.1-3.7,0.7-11.6,10.7     c-0.7,0.9-1.7,1.5-2.9,1.8l-7.8,1.7c-2.5,0.5-4,2.9-3.5,5.4c0.5,2.5,3,4,5.4,3.5l7.8-1.7c3.2-0.7,6-2.5,8.1-5     c0.3-0.4,0.6-0.8,0.9-1.1l7.2,21L32.3,89.5c-1.5,2.5-0.8,5.7,1.7,7.2c0.9,0.5,1.8,0.8,2.8,0.8c1.8,0,3.5-0.9,4.4-2.5l21.6-34.7     c2.2-3.5,2.8-7.9,1.7-11.9l-3.5-12c0.7,0.3,1.5,0.6,2.4,0.9c0.9,0.4,1.7,1,2.3,1.8l5.8,8.5c0.9,1.3,2.3,2,3.7,2     c0.9,0,1.8-0.3,2.6-0.8C79.8,47.3,80.4,44.5,78.9,42.4z"}),(0,c.jsx)("ellipse",{transform:"matrix(0.9941 -0.1082 0.1082 0.9941 -1.0767 5.3193)",cx:"48.5",cy:"12.6",rx:"10.1",ry:"10.1"})]})});return s?(0,c.jsx)(F,{title:s,children:l}):l}function O(e){let{className:t,style:n,title:s}=e,l=(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"".concat(V().icon," ").concat(V().cyclist," ").concat(null!=t?t:""),style:n,viewBox:"5 0 90 100",children:(0,c.jsxs)("g",{transform:"translate(0, 5)",children:[(0,c.jsx)("path",{d:"M45,81.9c-0.6-1-0.9-2-0.9-3.2h-4.3c-0.6-4.1-2.6-7.6-5.6-10.2l3.5-5.4l6.9,13c0.5-2.4,1-4.8,1.5-7l-4.5-8.5h5.7 c-2.7-1.2-8.6-3.1-13.2-4.3l1.2,2.2l-4.8,7.6c-2.1-1-4.4-1.5-6.8-1.5c-9.1,0-16.4,7.4-16.4,16.4c0,9.1,7.4,16.4,16.4,16.4 c8.3,0,15.2-6.2,16.3-14.2h6.4C45.7,83,45.3,82.5,45,81.9z M23.5,92.9c-6.5,0-11.9-5.3-11.9-11.9c0-6.5,5.3-11.9,11.9-11.9 c1.5,0,3,0.3,4.3,0.8l-6.3,9.8c-0.4,0.7-0.5,1.6-0.1,2.3c0.4,0.7,1.2,1.2,2,1.2h11.6C34.1,88.8,29.3,92.9,23.5,92.9z M27.7,78.8 l4-6.3c1.7,1.7,3,3.8,3.4,6.3H27.7z"}),(0,c.jsx)("path",{d:"M76.5,64.6c-1.6,0-3.1,0.2-4.6,0.7l-9.3-20.7c-0.4-0.8-1.2-1.3-2.1-1.3h-2.1c-0.4-0.6-1-1-1.7-1.2 c-4.1-1.1-8.3-2.8-9.4-3.6c-0.9-1.7-3-5.6-4.8-9.1c0.5-3.4,0-8.2-5.7-9c-5.6-0.7-6.6,1.9-8.8,8.3c-2.1,6.1-2.5,15.8-0.9,21.5 c0.5,1.7,1.4,3.3,2.5,3.4c4.3,0.4,16.9,4.3,19.8,6c0,2.9-1.5,11.4-3.2,18.4c-0.5,2.1,0.8,4.2,2.9,4.7c0.5,0.1,1,0.1,1.5,0.1 c1.5-0.2,2.8-1.4,3.2-3c4.8-20.5,3.2-23.1,2.4-24.3c-1.8-2.8-8.4-5.3-14.2-7c-0.1-1.8-0.2-4.4-0.2-7c0,0.1,0.1,0.2,0.1,0.2 c0.4,0.8,1.7,3.1,13,6.3c0.3,0.1,0.6,0.1,0.8,0.1c0.5,0,0.9-0.1,1.4-0.3H59l3.7,8.3h-4.3c0.3,0.9,0.5,2.3,0.4,4.6h2.5l-2.9,4.1 c-0.3,2.7-0.9,6.2-1.9,10.7l9.1-13l2.1,4.6c-4.6,2.9-7.7,8-7.7,13.9c0,9.1,7.4,16.4,16.4,16.4s16.4-7.4,16.4-16.4 C92.9,72,85.5,64.6,76.5,64.6z M76.5,92.9c-6.5,0-11.9-5.3-11.9-11.9c0-4,2-7.5,5-9.7L74.4,82c0.4,0.8,1.2,1.3,2.1,1.3 c0.3,0,0.6-0.1,0.9-0.2c1.2-0.5,1.7-1.9,1.1-3l-4.8-10.6c0.9-0.2,1.8-0.3,2.7-0.3c6.5,0,11.9,5.3,11.9,11.9 C88.3,87.6,83,92.9,76.5,92.9z"}),(0,c.jsx)("ellipse",{transform:"matrix(1.676928e-02 -0.9999 0.9999 1.676928e-02 27.2283 48.9794)",cx:"38.5",cy:"10.6",rx:"8.1",ry:"8.1"})]})});return s?(0,c.jsx)(F,{title:s,children:l}):l}function W(e){let{className:t,style:n,title:s}=e,l=(0,c.jsx)("svg",{viewBox:"0 0 56 68",className:"".concat(V().icon," ").concat(V().car," ").concat(null!=t?t:""),style:n,children:(0,c.jsxs)("g",{transform:"scale(1, 1.4),translate(0,-3)",children:[(0,c.jsx)("path",{d:"M47.1708984,47.4214478c2.4556885,0,4.5087891-1.7954102,4.887207-4.1463623,.0482178-.265686,.0725098-.5313721,.0725098-.8051147s-.024292-.5394287-.0725098-.8051147c-.378418-2.3509521-2.4315186-4.1463623-4.887207-4.1463623-2.4555664,0-4.5004883,1.7954102-4.8789062,4.1463623v.0080566c-.0483398,.2576294-.0725098,.5233154-.0725098,.7970581s.0241699,.5394287,.0725098,.8051147v.0080566c.3864746,2.3428955,2.4233398,4.1383057,4.8789062,4.1383057Z"}),(0,c.jsx)("path",{d:"M16.5200195,37.5184937c-2.4556885,0-4.5007324,1.7954102-4.8790283,4.1463623-.0482178,.265686-.0725098,.5313721-.0725098,.8051147s.024292,.5394287,.0725098,.8051147c.3782959,2.3509521,2.4233398,4.1463623,4.8790283,4.1463623,2.4555664,0,4.4925537-1.7954102,4.8790283-4.1383057v-.0080566c.0482178-.265686,.0723877-.5313721,.0723877-.8051147s-.0241699-.5394287-.0723877-.7970581v-.0080566c-.378418-2.3509521-2.4234619-4.1463623-4.8790283-4.1463623Z"}),(0,c.jsx)("path",{d:"M59.6799316,28.4599609l-11.5998535-2.0699463c-.2000732-.0300293-.380127-.1500244-.5-.3300171l-6.3100586-9.2700195c-.6000977-.8800049-1.6101074-1.4099731-2.6799316-1.4099731H16.1400146c-1.2000732,0-2.2999268,.6499634-2.8599854,1.6999512l-5.1101074,9.460022c-.1098633,.1900024-.2799072,.3400269-.4799805,.3900146l-3.7099609,1.1400146c-1.1699219,.3599854-1.9799805,1.4599609-1.9799805,2.6799927v9.9199829c0,1.539978,1.2600098,2.7999878,2.8000488,2.7999878h5c-.0600586-.3299561-.0800781-.6599731-.0800781-1,0-.3399658,.0200195-.6699829,.0800781-1,.0100098-.039978,.0100098-.0700073,.0200195-.1099854,.5200195-3.2199707,3.3299561-5.6900024,6.6999512-5.6900024s6.1799316,2.4700317,6.6999512,5.6900024v.0200195c.0100098,.0299683,.0100098,.0599976,.0100098,.0899658l.0100098,.0100098c.0600586,.3200073,.0800781,.6500244,.0800781,.9899902,0,.3400269-.0200195,.6700439-.0800781,1l-.0100098,.0100098h17.2299805l-.0100098-.0100098c-.0599365-.3299561-.0799561-.6599731-.0799561-1,0-.3399658,.0200195-.6699829,.0799561-.9899902l.0100098-.0100098c0-.0299683,0-.0700073,.0100098-.0999756v-.0100098c.5200195-3.2299805,3.3300781-5.6900024,6.6999512-5.6900024,3.3701172,0,6.1900635,2.460022,6.710083,5.6900024,.0100098,.039978,.0100098,.0700073,.0200195,.1099854,.0599365,.3300171,.0799561,.6600342,.0799561,1,0,.3400269-.0200195,.6700439-.0799561,1h5.2999268c1.5400391,0,2.8000488-1.2600098,2.8000488-2.7999878v-9.460022c0-1.3599854-.9799805-2.5199585-2.3200684-2.75Zm-30.289917,2.1500244h1.6099854c.5500488,0,1,.4500122,1,1s-.4499512,1-1,1h-1.6099854c-.5499268,0-1-.4500122-1-1s.4500732-1,1-1Zm-16.6700439-2.4500122l4.5900879-8.5h8.8598633v8.5H12.7199707Zm16.6700439,0v-8.5h8.1700439l5.6799316,8.3599854c.0300293,.0500488,.0700684,.1000366,.0900879,.1400146h-13.9400635Z"})]})});return s?(0,c.jsx)(F,{title:s,children:l}):l}var Q=n(2297),G=n.n(Q),J=n(7149);let K={id:"ID",dt:"Date/Time",mc:"Municipality",casualties:"Casualties",road:"Road",cross_street:"Cross Street",mp:"MP",ll:"Lat, Lon"},X="#777",$="#d00",ee=[{title:"Vehicle damage unknown",fill:X},{title:"Vehicle undamaged",fill:"green"},{title:"Vehicle sustained minor damage",fill:"orange"},{title:"Vehicle sustained moderate damage",fill:$},{title:"Vehicle disabled",fill:"black"}],et=[{txt:"condition unknown",fill:X},{txt:"deceased",fill:"black"},{txt:"serious injury",fill:$},{txt:"moderate injury",fill:"orange"},{txt:"possible injury",fill:"#8B8000"}];function en(e){let{occupants:t,pedestrians:n,vehicles:s}=e,l=[],a=[],r=[],o=[],i=[[],l,a,r,o];return null==t||t.forEach((e,t)=>{let{pos:n,condition:s,eject:l,age:a,sex:r,inj_loc:o,inj_type:d}=e;s=null!=s?s:0;let u="";switch(l){case 2:u="partially ejected";break;case 3:u="ejected";break;case 4:u="trapped"}let[h,m]=1===n?["Driver",H]:["Passenger",q],{txt:p,fill:f}=et[s],j="".concat(null!=a?a:"").concat("M"===r||"F"===r?r:""),x="".concat(h).concat(j?", ".concat(j,","):""," ").concat(p).concat(u?", ".concat(u):""),g=(0,c.jsx)(m,{title:x,style:{fill:f}},t);i[s].push(g)}),null==n||n.forEach((e,t)=>{let{condition:n,age:s,sex:l,inj_loc:a,inj_type:r,cyclist:o}=e,[d,u]=o?["Cyclist",O]:["Pedestrian",U],{txt:h,fill:m}=et[n=null!=n?n:0],p="".concat(null!=s?s:"").concat("M"===l||"F"===l?l:""),f="".concat(d).concat(p?", ".concat(p,","):""," ").concat(h),j=(0,c.jsx)(u,{title:f,style:{fill:m}},t);i[n].push(j)}),(0,c.jsxs)("div",{className:G().icons,children:[l.length?(0,c.jsx)("span",{className:G().typeIcons,children:l}):null,a.length?(0,c.jsx)("span",{className:G().typeIcons,children:a}):null,r.length?(0,c.jsx)("span",{className:G().typeIcons,children:r}):null,o.length?(0,c.jsx)("span",{className:G().typeIcons,children:o}):null,(null==s?void 0:s.length)?(0,c.jsx)("span",{className:G().typeIcons,children:s.map((e,t)=>{let{damage:n,damage_loc:s,impact_loc:l,departure:a}=e,r=4===(n=null!=n?n:0)||3===a||5===a;r&&(n=4);let o=a>=3,i=4===a||5===a,{title:d}=ee[n],{fill:u}=ee[r||o||i?4:n];return 1===a&&(d+=", driven away"),2===a&&(d+=", left at scene"),o&&(d+=", towed"),i&&(d+=", impounded"),(0,c.jsx)(W,{style:{fill:u},title:d},t)})}):null]})}var ec=n(1191),es=n.n(ec),el=n(8510),ea=n.n(el),er=n(5611),eo=n(1341),ei=n(8921),ed=n(5644),eu=n(4607),eh=n(3728),em=n(817),ep=n(5142);function ef(e){var t;let{rows:n,colTitles:s,className:l,pagination:a}=e;return(0,c.jsx)(er.Z,{component:eo.Z,style:{boxShadow:"none"},className:"".concat(ea().rowsTable," ").concat(l||""),children:(0,c.jsxs)(ei.Z,{stickyHeader:!0,sx:{minWidth:450},size:"small","aria-label":"simple table",children:[(0,c.jsx)(ed.Z,{className:ea().tableHead,children:(0,c.jsx)(eu.Z,{children:(0,L.XP)(null!==(t=n[0])&&void 0!==t?t:{}).map(e=>"key"!==e&&(0,c.jsx)(F,{title:null==s?void 0:s[e],arrow:!0,children:(0,c.jsx)(eh.Z,{align:"right",className:ea().noselect,children:e})},e))})}),(0,c.jsx)(em.Z,{children:n.map(e=>{let{key:t}=e;return(0,c.jsx)(eu.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:(0,L._I)(e,(e,t)=>"key"!==e&&(0,c.jsx)(eh.Z,{align:"right",children:t},e))},t)})}),a&&(0,c.jsx)(ep.Z,{children:(0,c.jsx)(eu.Z,{children:(0,c.jsx)("td",{colSpan:6,children:"before"in a?(0,c.jsx)(P,{...a}):(0,c.jsx)(Z,{...a})})})})]})})}function ej(e){let{result:t,colTitles:n,className:s,pagination:l}=e;return(0,r.g_)(e=>(0,c.jsxs)("div",{className:ea().sqlError,children:[(0,c.jsx)("h2",{children:"Error"}),(0,c.jsx)("pre",{children:e.message})]}),e=>(0,c.jsx)(ef,{rows:e,className:s,colTitles:n,pagination:l}))(t)}var ex=n(1796),eg=n(7292);let ev={id:"ID",dt:"Date/Time",mc:"Municipality",casualties:"Casualties",location:"Location",street:"Street",highway:"Highway"};function ey(e){let{tk:t,dk:n,ok:s,pk:l,bk:a,ti:r}=e,o=et[0].fill;return(0,c.jsx)("div",{className:G().icons,children:(0,c.jsxs)("span",{className:G().typeIcons,children:[(0,eg.w6)(n).map(e=>(0,c.jsx)(H,{title:"Driver killed"},e)),(0,eg.w6)(s).map(e=>(0,c.jsx)(q,{title:"Passenger killed"},e)),(0,eg.w6)(l).map(e=>(0,c.jsx)(U,{title:"Pedestrian killed"},e)),(0,eg.w6)(a).map(e=>(0,c.jsx)(O,{title:"Cyclist killed"},e)),(0,eg.w6)(t-n-s-l-a).map(e=>(0,c.jsx)(R,{title:"Person killed"},e)),(0,eg.w6)(r).map(e=>(0,c.jsx)(R,{title:"Person injured",style:{fill:o}},e))]})})}var e_=n(9011);function eb(e){let{urls:t,cc:n,cn:s,mc:o,mc2mn:i,title:d,subtitle:u}=e,[h,m]=(0,a.useState)(65536),p=function(e,t){var n,c;let{start:s,end:l}=t,{id:r}=e,[o,i]=(0,f.Z)(w(r),{defaultValue:null!==(n=e.perPage)&&void 0!==n?n:b}),[d,u]=(0,f.Z)(I(r),{defaultValue:null!==(c=null!=l?l:e.before)&&void 0!==c?c:x()("%Y-%m-%d",new Date),serializer:{parse:e=>e.match(S)?e:(console.warn("useDatePaginationControls: invalid date",e),null!=l?l:x()("%Y-%m-%d",new Date)),stringify:e=>e.match(S)?e:(console.warn("useDatePaginationControls: invalid date",e),null!=l?l:x()("%Y-%m-%d",new Date))}}),h=(0,a.useMemo)(()=>null!=l?l:x()("%Y-%m-%d",new Date),[l]);return{perPage:o,setPerPage:i,before:d,setBefore:(0,a.useCallback)(e=>{console.log("setBefore:",e),e.match(S)?e>h?u(h):u(e):console.warn("setBefore: invalid date",e)},[u,h]),start:s,end:l}}({id:"njdot-crashes"},{start:"2001-01-01",end:"2022-01-01"}),j=function(e){let{cc:t,mc:n,timerId:c="year-stats",...s}=e,l=z({query:(0,a.useMemo)(()=>{let e="group by cc".concat(n?", mc":"",", y, condition"),c="having cc=".concat(t).concat(n?" and mc=".concat(n):"");return"\n                select y, condition,\n                sum(drivers + passengers + pedestrians + cyclists) as total,\n                sum(num_crashes) as num_crashes\n                from cmymc ".concat(e,"\n                ").concat(c,"\n                order by y desc, condition asc\n            ")},[t,n]),timerId:c,...s});return l?(0,r.UI)(E)(l):null}({url:t.dot.cmymc,cc:n,mc:o,requestChunkSize:h}),g=function(e){let{mc2mn:t,...n}=e,s=function(e){let{cc:t,mc:n,before:c,perPage:s,timerId:r="njdot-crashes",urls:o,...i}=e,d=l().tz(c,"America/New_York").add(1,"day").format("YYYY-MM-DD"),u=(0,a.useMemo)(()=>"\n            select * from crashes\n            where (severity='i' or severity='f') and cc=".concat(t).concat(n?" and mc=".concat(n):""," and dt < '").concat(d,"'\n            order by dt desc\n            limit ").concat(s,"\n        "),[c,s]);return z({...i,url:o.dot.crashes,timerId:r,query:u})}({...n}),o=function(e){let{crashesResult:t,urls:n,...c}=e,[s,l]=(0,a.useState)(null),o=(0,D.tI)({url:n.dot.occupants,timerId:"occupants",...c});return(0,a.useEffect)(()=>{t&&(console.log("occupants effect"),(0,r.UI)(e=>{var t;let n=e.map(e=>{let{id:t}=e;return t}),c="\n                        select crash_id, pos, condition, eject, age, sex, inj_loc, inj_type\n                        from occupants\n                        where crash_id in (".concat(n.join(", "),") and condition >= 1 and condition < 5\n                        order by crash_id, condition, pos\n                    ");console.log("Fetching occupants"),null===(t=o(c))||void 0===t||t.then(e=>{(0,r.g_)(e=>(console.error("error fetching occupants:",e),null),e=>{console.log("crashOccupants:",e);let t={};for(let n of e){let{crash_id:e}=n;t[e]||(t[e]=[]),t[e].push(n)}l(t)})(e)})})(t))},[t,o]),s}({crashesResult:s,...n}),i=function(e){let{crashesResult:t,urls:n,...c}=e,[s,l]=(0,a.useState)(null),o=(0,D.tI)({url:n.dot.pedestrians,timerId:"pedestrians",...c});return(0,a.useEffect)(()=>{t&&(console.log("pedestrian effect"),(0,r.UI)(e=>{var t;let n=e.map(e=>{let{id:t}=e;return t}),c="\n                        select crash_id, condition, age, sex, inj_loc, inj_type, cyclist\n                        from pedestrians\n                        where crash_id in (".concat(n.join(", "),") and condition >= 1 and condition < 5\n                        order by crash_id, condition, cyclist\n                    ");console.log("Fetching pedestrians"),null===(t=o(c))||void 0===t||t.then(e=>{(0,r.g_)(e=>(console.error("error fetching pedestrians:",e),null),e=>{console.log("crashPedestrians:",e);let t={};for(let n of e){let{crash_id:e}=n;t[e]||(t[e]=[]),t[e].push(n)}l(t)})(e)})})(t))},[t,o]),s}({crashesResult:s,...n}),d=function(e){let{crashesResult:t,urls:n,...c}=e,[s,l]=(0,a.useState)(null),o=(0,D.tI)({url:n.dot.vehicles,timerId:"vehicles",...c});return(0,a.useEffect)(()=>{t&&(console.log("vehicles effect"),(0,r.UI)(e=>{var t;let n=e.map(e=>{let{id:t}=e;return t}),c="\n                        select\n                            crash_id,\n                            damage,\n                            damage_loc,\n                            impact_loc,\n                            departure,\n                            type\n                        from vehicles v\n                        where crash_id in (".concat(n.join(", "),")\n                    ");console.log("Fetching vehicles"),null===(t=o(c))||void 0===t||t.then(e=>{(0,r.g_)(e=>(console.error("error fetching vehicles:",e),null),e=>{console.log("crashVehicles:",e);let t={};for(let n of e){let{crash_id:e}=n;t[e]||(t[e]=[]),t[e].push(n)}l(t)})(e)})})(t))},[t,o]),s}({crashesResult:s,...n}),u=["dt",...n.mc?[]:["mc"],"casualties","road","cross_street","mp"];return(0,a.useMemo)(()=>{if(!s)return;console.log("crashRows effect");let e=t?{cn:n.cn,mc2mn:t}:void 0;return(0,r.UI)(t=>(function(e){let{rows:t,cols:n,county:s,crashOccupants:l,crashPedestrians:a,crashVehicles:r}=e;return t.map(e=>{let{id:t}=e,o=null==l?void 0:l[t],i=null==a?void 0:a[t],d=null==r?void 0:r[t];return(0,L.sq)([["key",t],...n.map(n=>{let l="";if("dt"==n)l=(0,c.jsx)(F,{title:"Crash ID: ".concat(t),children:(0,c.jsx)("span",{children:x()("%-m/%-d/%y %-I:%M%p",new Date(e.dt))})});else if("ll"==n){let{ilat:t,ilon:n,olat:c,olon:s}=e,[a,r]=t&&n?[t,n]:[c,s];l=a&&r?"".concat(null==a?void 0:a.toFixed(6),", ").concat(null==r?void 0:r.toFixed(6)):""}else if("road"==n){let{road:t,sri:n}=e;l=(0,c.jsx)(F,{title:n?"SRI ".concat(n):void 0,children:(0,c.jsx)("span",{children:t})})}else if("casualties"==n)l=(0,c.jsx)(en,{occupants:o,pedestrians:i,vehicles:d});else if("mc"==n){let{mc:t}=e;if(!s)throw Error("`mc2mn` is required for `mc` col");let{cn:n,mc2mn:a}=s,r=a[t],o=(0,Y.F)(r);l=(0,c.jsx)(J.Z,{href:"/c/".concat((0,Y.F)(n),"/").concat(o),children:r})}else if("mp"==n){let{mp:t,ilat:n,ilon:s}=e;if(t&&(l=t.toFixed(2),n&&s)){let e=function(e){let{lat:t,lon:n}=e;return"https://www.google.com/maps/?q=".concat(t,",").concat(n)}({lat:n,lon:s});l=(0,c.jsx)(J.Z,{href:e,children:l})}}else{var a;l=null!==(a=e[n])&&void 0!==a?a:""}return[K[n],l]})])})})({rows:t,cols:u,county:e,crashOccupants:o,crashPedestrians:i,crashVehicles:d}))(s)},[s,u,o])}({urls:t,cc:n,cn:s,mc:o,mc2mn:i,...p,requestChunkSize:h}),v=function(e,t,n){let{before:c,setBefore:s,start:l,end:o,perPage:i,setPerPage:d}=n,u=(0,a.useMemo)(()=>e?(0,r.g_)(()=>null,t)(e):null,[e]);return(0,a.useMemo)(()=>null===u?void 0:{before:c,setBefore:s,start:l,end:o,perPage:i,setPerPage:d,total:u},[c,s,l,o,i,d,u])}(j,e=>{let{fc:t,sic:n,mic:c,pic:s}=e.totals;return t+n+c+s},p),y=function(e){var t,n;let{id:c}=e,[s,l]=(0,f.Z)(w(c),{defaultValue:null!==(t=e.perPage)&&void 0!==t?t:b}),[a,r]=(0,f.Z)(N(c),{defaultValue:null!==(n=e.page)&&void 0!==n?n:0});return{perPage:s,setPerPage:l,page:a,setPage:r}}({id:"njsp-crashes"}),_=function(e){let{mc2mn:t,...n}=e,s=function(e){let{cc:t,mc:n,page:c,perPage:s,timerId:l="njsp-crashes",urls:r,...o}=e,i=(0,a.useMemo)(()=>{let e=c*s;return"\n                select * from crashes\n                where cc=".concat(t).concat(n?" and mc=".concat(n):"","\n                order by dt desc\n                limit ").concat(s," offset ").concat(e,"\n            ")},[c,s]);return z({...o,url:r.njsp.crashes,timerId:l,query:i})}({...n}),l=["dt",...n.mc?[]:["mc"],"casualties","location"];return(0,a.useMemo)(()=>{if(!s)return;console.log("useNjspCrashRows effect");let e=t?{cn:n.cn,mc2mn:t}:void 0;return(0,r.UI)(t=>(function(e){let{rows:t,cols:n,county:s}=e;return t.map(e=>{let{id:t}=e;return(0,L.sq)([["key",t],...n.map(n=>{let l="";if("dt"==n)l=(0,c.jsx)(F,{title:"NJSP ACCID: ".concat(t),children:(0,c.jsx)("span",{children:x()("%-m/%-d/%y %-I:%M%p",new Date(e.dt))})});else if("casualties"==n)l=(0,c.jsx)(ey,{...e});else if("mc"==n){let{mc:t}=e;if(!s)throw Error("`mc2mn` is required for `mc` col");let{cn:n,mc2mn:a}=s,r=a[t],o=(0,Y.F)(r);l=(0,c.jsx)(J.Z,{href:"/c/".concat((0,Y.F)(n),"/").concat(o),children:r})}else{var a;l=null!==(a=e[n])&&void 0!==a?a:""}return[ev[n],l]})])})})({rows:t,cols:l,county:e}))(s)},[s,l])}({urls:t,cc:n,cn:s,mc:o,mc2mn:i,...y}),M=function(e,t,n){let{page:c,setPage:s,perPage:l,setPerPage:o}=n,i=(0,a.useMemo)(()=>e?(0,r.g_)(()=>null,t)(e):null,[e]);return(0,a.useMemo)(()=>null===i?void 0:{page:c,setPage:s,perPage:l,setPerPage:o,total:i},[c,s,l,o,i])}(function(e){let{cc:t,mc:n,timerId:c="njsp-crashes-total",urls:s,...l}=e,r=(0,a.useMemo)(()=>"\n                select count(*) as total from crashes\n                where cc=".concat(t).concat(n?" and mc=".concat(n):"","\n            "),[t,n]);return z({...l,url:s.njsp.crashes,timerId:c,query:r})}({urls:t,cc:n,mc:o,requestChunkSize:h}),e=>(0,e_.Z)(e).total,y);return(0,c.jsx)("div",{className:es().body,children:(0,c.jsxs)("div",{className:es().container,children:[(0,c.jsx)("h1",{className:es().title,children:d}),u&&(0,c.jsx)("div",{className:es().subtitle,children:u}),_&&(0,c.jsxs)("div",{className:es().section,children:[(0,c.jsx)("h2",{children:"Fatal crashes"}),(0,c.jsx)("div",{className:es().sectionSubtitle,children:"2008 – present"}),(0,c.jsx)(ej,{className:es().crashesTable,result:_,pagination:M}),(0,c.jsxs)("div",{className:es().footer,children:["Source: ",(0,c.jsx)(J.Z,{href:ex.jy,children:"NJ State Police"})," (fatal crashes only; typically published between a day and a few months after the fact)"]})]}),g&&(0,c.jsxs)("div",{className:es().section,children:[(0,c.jsx)("h2",{children:"Fatal / Injury crash details"}),(0,c.jsx)("div",{className:es().sectionSubtitle,children:"2001-2021"}),(0,c.jsx)(ej,{className:es().crashesTable,result:g,pagination:v}),(0,c.jsxs)("div",{className:es().footer,children:["Source: ",(0,c.jsx)(J.Z,{href:ex.Iv,children:"NJ DOT"})," (includes non-fatal crashes; most recent data: 2021)"]})]}),j&&(0,c.jsxs)("div",{className:es().section,children:[(0,c.jsx)("h2",{children:"Annual stats"}),(0,c.jsx)("div",{className:es().sectionSubtitle,children:"2001-2021"}),(0,c.jsx)(ej,{className:"".concat(es().crashesTable," ").concat(es().withTotals),result:(0,r.UI)(e=>(function(e){let{ysds:t}=e;return(0,L._I)(t,(e,t)=>{let{k:n,fc:c,si:s,sic:l,mi:a,mic:r,pi:o,pic:i,nic:d}=t;return{key:e,Year:"totals"===e?"2001–2021":e,"Total crashes":(c+l+r+i+d).toLocaleString(),Deaths:n.toLocaleString(),"Serious Injuries":s.toLocaleString(),"Minor Injuries":a.toLocaleString(),"Other Reported Injuries":o.toLocaleString()}})})({ysds:e}))(j),colTitles:B})]})]})})}},9622:function(e,t,n){"use strict";n.d(t,{F:function(){return s},c:function(){return l}});var c=n(5112);let s=e=>e.toLowerCase().replaceAll(" ","-"),l=e=>(0,c.Q)(e.replaceAll("-"," "))},1796:function(e,t,n){"use strict";n.d(t,{Iv:function(){return a},jy:function(){return l},mB:function(){return r}});var c=n(1358),s=n(2400);let l="https://nj.gov/njsp/info/fatalacc/",a="https://www.state.nj.us/transportation/refdata/accident/rawdata01-current.shtm";function r(){let e=s.env.S3_DBS?"https://nj-crashes.s3.amazonaws.com/njdot/data":"".concat((0,c.b)(),"/njdot");return{crashes:"".concat(e,"/crashes.db"),occupants:"".concat(e,"/occupants.db"),pedestrians:"".concat(e,"/pedestrians.db"),vehicles:"".concat(e,"/vehicles.db"),drivers:"".concat(e,"/drivers.db"),cmym:"".concat(e,"/cmym.db"),cmymc:"".concat(e,"/cmymc.db")}}},1191:function(e){e.exports={body:"city_body__5c1cL",container:"city_container__1xFvL",title:"city_title__Otab0",subtitle:"city_subtitle__lCYHw",crashesTable:"city_crashesTable__97b1x",withTotals:"city_withTotals__oPp_8",section:"city_section__oVhxx",sectionSubtitle:"city_sectionSubtitle__DBotT"}},6665:function(e){e.exports={icon:"icons_icon__nBWSs",driver:"icons_driver__Actj4",pedestrian:"icons_pedestrian__lR5Dh",cyclist:"icons_cyclist__uXs6N",car:"icons_car__c6vpg"}},1109:function(e){e.exports={tablePagination:"pagination_tablePagination__lC3mW",curPage:"pagination_curPage__dxmzj",pageNum:"pagination_pageNum__WgUES",dirty:"pagination_dirty__T8K2y",beforeDate:"pagination_beforeDate__Q6Cge",pageSize:"pagination_pageSize__W5eRI",pageCount:"pagination_pageCount___YeaQ",back:"pagination_back__sVr_4",reduce:"pagination_reduce__ZMeGM"}},8510:function(e){e.exports={sqlError:"result-table_sqlError__4KsON",tableHead:"result-table_tableHead__jkTt6",noselect:"result-table_noselect__eGqI4",rowsTable:"result-table_rowsTable__9gjgP"}},2297:function(e){e.exports={icons:"use-crashes_icons__Hn8TQ",typeIcons:"use-crashes_typeIcons__Eca3F",typeIcon:"use-crashes_typeIcon__9988a"}}}]);