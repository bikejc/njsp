(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[13],{87483:function(e,t,n){"use strict";n.d(t,{RY:function(){return u},mY:function(){return o}});var c=n(52676),r=n(75271),s=n(77779),a=n.n(s);let o=(e,t)=>{let n=document.createElement("span");document.body.appendChild(n),n.style.font=t,n.style.position="absolute",n.style.height="auto",n.style.width="auto",n.style.whiteSpace="nowrap",n.textContent=e;let c=Math.ceil(n.getBoundingClientRect().width);return document.body.removeChild(n),c},l=e=>e?"".concat(e," County"):"NJ",i=e=>e||"NJ";function u(e){let{county:t,setCounty:n,Counties:s}=e,u=(0,r.useMemo)(()=>i(t),[t]),d=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(d.current){let{fontSize:e,fontWeight:n,fontFamily:c}=window.getComputedStyle(d.current),r="".concat(n," ").concat(e," ").concat(c),s=o(l(t),r);d.current.style.width="".concat(s+30,"px")}},[t]),(0,c.jsxs)("select",{className:a().countySelect,ref:d,value:u,onChange:e=>{let t=e.target.value;n("NJ"===t?null:t)},children:[(0,c.jsx)("option",{value:"NJ",children:"NJ"}),s.map(e=>(0,c.jsx)("option",{value:e,children:l(e)},e))]})}},48787:function(e,t,n){"use strict";n.d(t,{F:function(){return r},c:function(){return s}});var c=n(85766);let r=e=>e.toLowerCase().replaceAll(" ","-"),s=e=>(0,c.Q)(e.replaceAll("-"," "))},99197:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var c=n(52676),r=n(69906),s=n(42137),a=n(84799);n(75271);var o=n(98999),l=n.n(o);function i(){return(0,c.jsxs)("div",{className:l().footer,children:[(0,c.jsxs)("p",{children:["Code and data are ",(0,c.jsx)(r.Z,{href:s.Tf.href,children:"on GitHub"}),". ",(0,c.jsx)(r.Z,{href:"".concat(s.Tf.href,"/issues/new"),children:"File an issue"}),", ",(0,c.jsx)("a",{href:"mailto:".concat(s.fQ),children:"send us an email"}),", or ",(0,c.jsx)(r.Z,{href:"https://hudcostreets.org/get-involved",children:"get involved"}),"."]}),(0,c.jsx)(a.I_,{socials:[{name:"Hudson County Complete Streets",title:"Hudson County Complete Streets",href:"https://hudcostreets.org",src:"/logos/hccs.png"}]})]})}},3610:function(e,t,n){"use strict";n.d(t,{HQ:function(){return r},Of:function(){return c}});let c="".concat("hudcostreets","/").concat("nj-crashes"),r="https://github.com/".concat(c)},62249:function(e,t,n){"use strict";n.d(t,{Fc:function(){return h},HB:function(){return d},MC:function(){return m},S0:function(){return p},Zk:function(){return g},il:function(){return j},lG:function(){return y},wh:function(){return f}});var c=n(52676);n(75271);var r=n(37392),s=n.n(r),a=n(61128),o=n(5297),l=n(69906),i=n(22764);function u(e){let{className:t,style:n,title:r,children:o,...l}=e,i=(0,c.jsxs)("svg",{className:"".concat(s().icon," ").concat(null!=t?t:""),style:n,...l,children:[r&&(0,c.jsx)("title",{children:r}),o]});return r?(0,c.jsx)(a.u,{title:r,children:i}):i}function d(e){let{className:t,style:n,title:r}=e;return(0,c.jsx)(u,{xmlns:"http://www.w3.org/2000/svg",viewBox:"14 5 70 88",className:"".concat(s().icon," ").concat(s().driver," ").concat(null!=t?t:""),style:n,title:r,children:(0,c.jsxs)("g",{transform:"translate(0,12)",children:[(0,c.jsx)("path",{d:"M62.3,47.8c-11.7,0-21.1,9.5-21.1,21.1S50.7,90,62.3,90s21.1-9.5,21.1-21.1S74,47.8,62.3,47.8z M49.9,56.5   c3.3-3.3,7.7-5.2,12.4-5.2s9.1,1.8,12.4,5.2c1.1,1.1,2.1,2.4,2.9,3.8L68,64.7c-1.3-1.7-3.3-2.9-5.7-2.9c-2.3,0-4.4,1.1-5.7,2.9   L47,60.2C47.8,58.9,48.7,57.6,49.9,56.5z M59.4,86.2c-3.6-0.6-6.9-2.3-9.5-4.9c-3.3-3.3-5.2-7.7-5.2-12.4c0-1.1,0.1-2.2,0.3-3.2   l10.3,2.8c0,0.1,0,0.3,0,0.4c0,3.2,2.1,5.9,5.1,6.8L59.4,86.2z M58.8,68.9c0-1.9,1.6-3.5,3.5-3.5c1.9,0,3.5,1.6,3.5,3.5   s-1.6,3.5-3.5,3.5C60.4,72.4,58.8,70.8,58.8,68.9z M74.8,81.3c-2.6,2.6-5.9,4.3-9.5,4.9l-0.9-10.6c2.9-0.9,5.1-3.6,5.1-6.8   c0-0.2,0-0.3,0-0.4l10.3-2.8c0.2,1,0.3,2.1,0.3,3.2C79.9,73.6,78.1,78,74.8,81.3z"}),(0,c.jsx)("circle",{cx:"41.2",cy:"24.4",r:"14.4"}),(0,c.jsx)("path",{d:"M61.9,46.4c-2.4-3.9-5.8-7.1-9.8-9.1c-2.9,2.5-6.7,4-10.8,4c-4.1,0-7.9-1.5-10.8-3.9c-7.9,4.1-13.4,12.3-13.8,22   c0,0,0,8.1,0,8.2c0,3.3,10.6,6,23.7,6.1c-0.3-1.5-0.5-3.1-0.5-4.7C39.8,56.6,49.7,46.6,61.9,46.4z"})]})})}function h(e){let{className:t,style:n,title:r}=e;return(0,c.jsx)(u,{viewBox:"3 0 25 30",className:"".concat(s().icon," ").concat(s().passenger," ").concat(null!=t?t:""),style:n,title:r,children:(0,c.jsxs)("g",{transform:"translate(15.5 14)",children:[(0,c.jsxs)("g",{transform:"translate(-18 -15)",children:[(0,c.jsx)("circle",{cx:"17.94653",cy:"7.35815",r:"5.35815"}),(0,c.jsx)("path",{d:"M7.8689,20.46265V28.469A1.53531,1.53531,0,0,0,9.39966,30h14.3291L10.3335,16.58936A4.26837,4.26837,0,0,0,7.8689,20.46265Z M28.01538,28.469V20.46265A4.27642,4.27642,0,0,0,23.72876,16.176H14.2373L27.60205,29.52539A1.5925,1.5925,0,0,0,28.01538,28.469Z"})]}),(0,c.jsxs)("g",{transform:"scale(-1 1),translate(-18 -15)",children:[(0,c.jsx)("circle",{cx:"17.94653",cy:"7.35815",r:"5.35815"}),(0,c.jsx)("path",{d:"M7.8689,20.46265V28.469A1.53531,1.53531,0,0,0,9.39966,30h14.3291L10.3335,16.58936A4.26837,4.26837,0,0,0,7.8689,20.46265Z M28.01538,28.469V20.46265A4.27642,4.27642,0,0,0,23.72876,16.176H14.2373L27.60205,29.52539A1.5925,1.5925,0,0,0,28.01538,28.469Z"})]})]})})}function f(e){let{className:t,style:n,title:r}=e;return(0,c.jsxs)(u,{viewBox:"5.5 0 25 30",className:"".concat(s().icon," ").concat(s().passenger," ").concat(null!=t?t:""),style:n,title:r,children:[(0,c.jsx)("circle",{cx:"17.94653",cy:"7.35815",r:"5.35815"}),(0,c.jsx)("path",{d:"M7.8689,20.46265V28.469A1.53531,1.53531,0,0,0,9.39966,30h14.3291L10.3335,16.58936A4.26837,4.26837,0,0,0,7.8689,20.46265Z"}),(0,c.jsx)("path",{d:"M28.01538,28.469V20.46265A4.27642,4.27642,0,0,0,23.72876,16.176H14.2373L27.60205,29.52539A1.5925,1.5925,0,0,0,28.01538,28.469Z"})]})}function p(e){let{className:t,style:n,title:r}=e;return(0,c.jsx)(u,{viewBox:"15 0 70 100",className:"".concat(s().icon," ").concat(s().pedestrian," ").concat(null!=t?t:""),style:n,title:r,children:(0,c.jsxs)("g",{children:[(0,c.jsx)("path",{d:"M63.3,68.2l-7,11.2l5.4,14.7c0.8,2.1,2.8,3.4,4.9,3.4c0.6,0,1.2-0.1,1.8-0.3c2.7-1,4.1-4,3.1-6.7L63.3,68.2z"}),(0,c.jsx)("path",{d:"M78.9,42.4l-5.8-8.5c-1.6-2.3-3.9-4.1-6.5-5.1c-10.6-4.1-12-4-13-4l-7.5,0.5c-2.1,0.1-3.7,0.7-11.6,10.7     c-0.7,0.9-1.7,1.5-2.9,1.8l-7.8,1.7c-2.5,0.5-4,2.9-3.5,5.4c0.5,2.5,3,4,5.4,3.5l7.8-1.7c3.2-0.7,6-2.5,8.1-5     c0.3-0.4,0.6-0.8,0.9-1.1l7.2,21L32.3,89.5c-1.5,2.5-0.8,5.7,1.7,7.2c0.9,0.5,1.8,0.8,2.8,0.8c1.8,0,3.5-0.9,4.4-2.5l21.6-34.7     c2.2-3.5,2.8-7.9,1.7-11.9l-3.5-12c0.7,0.3,1.5,0.6,2.4,0.9c0.9,0.4,1.7,1,2.3,1.8l5.8,8.5c0.9,1.3,2.3,2,3.7,2     c0.9,0,1.8-0.3,2.6-0.8C79.8,47.3,80.4,44.5,78.9,42.4z"}),(0,c.jsx)("ellipse",{transform:"matrix(0.9941 -0.1082 0.1082 0.9941 -1.0767 5.3193)",cx:"48.5",cy:"12.6",rx:"10.1",ry:"10.1"})]})})}function m(e){let{className:t,style:n,title:r}=e;return(0,c.jsx)(u,{xmlns:"http://www.w3.org/2000/svg",viewBox:"5 0 90 100",className:"".concat(s().icon," ").concat(s().cyclist," ").concat(null!=t?t:""),style:n,title:r,children:(0,c.jsxs)("g",{transform:"translate(0, 5)",children:[(0,c.jsx)("path",{d:"M45,81.9c-0.6-1-0.9-2-0.9-3.2h-4.3c-0.6-4.1-2.6-7.6-5.6-10.2l3.5-5.4l6.9,13c0.5-2.4,1-4.8,1.5-7l-4.5-8.5h5.7 c-2.7-1.2-8.6-3.1-13.2-4.3l1.2,2.2l-4.8,7.6c-2.1-1-4.4-1.5-6.8-1.5c-9.1,0-16.4,7.4-16.4,16.4c0,9.1,7.4,16.4,16.4,16.4 c8.3,0,15.2-6.2,16.3-14.2h6.4C45.7,83,45.3,82.5,45,81.9z M23.5,92.9c-6.5,0-11.9-5.3-11.9-11.9c0-6.5,5.3-11.9,11.9-11.9 c1.5,0,3,0.3,4.3,0.8l-6.3,9.8c-0.4,0.7-0.5,1.6-0.1,2.3c0.4,0.7,1.2,1.2,2,1.2h11.6C34.1,88.8,29.3,92.9,23.5,92.9z M27.7,78.8 l4-6.3c1.7,1.7,3,3.8,3.4,6.3H27.7z"}),(0,c.jsx)("path",{d:"M76.5,64.6c-1.6,0-3.1,0.2-4.6,0.7l-9.3-20.7c-0.4-0.8-1.2-1.3-2.1-1.3h-2.1c-0.4-0.6-1-1-1.7-1.2 c-4.1-1.1-8.3-2.8-9.4-3.6c-0.9-1.7-3-5.6-4.8-9.1c0.5-3.4,0-8.2-5.7-9c-5.6-0.7-6.6,1.9-8.8,8.3c-2.1,6.1-2.5,15.8-0.9,21.5 c0.5,1.7,1.4,3.3,2.5,3.4c4.3,0.4,16.9,4.3,19.8,6c0,2.9-1.5,11.4-3.2,18.4c-0.5,2.1,0.8,4.2,2.9,4.7c0.5,0.1,1,0.1,1.5,0.1 c1.5-0.2,2.8-1.4,3.2-3c4.8-20.5,3.2-23.1,2.4-24.3c-1.8-2.8-8.4-5.3-14.2-7c-0.1-1.8-0.2-4.4-0.2-7c0,0.1,0.1,0.2,0.1,0.2 c0.4,0.8,1.7,3.1,13,6.3c0.3,0.1,0.6,0.1,0.8,0.1c0.5,0,0.9-0.1,1.4-0.3H59l3.7,8.3h-4.3c0.3,0.9,0.5,2.3,0.4,4.6h2.5l-2.9,4.1 c-0.3,2.7-0.9,6.2-1.9,10.7l9.1-13l2.1,4.6c-4.6,2.9-7.7,8-7.7,13.9c0,9.1,7.4,16.4,16.4,16.4s16.4-7.4,16.4-16.4 C92.9,72,85.5,64.6,76.5,64.6z M76.5,92.9c-6.5,0-11.9-5.3-11.9-11.9c0-4,2-7.5,5-9.7L74.4,82c0.4,0.8,1.2,1.3,2.1,1.3 c0.3,0,0.6-0.1,0.9-0.2c1.2-0.5,1.7-1.9,1.1-3l-4.8-10.6c0.9-0.2,1.8-0.3,2.7-0.3c6.5,0,11.9,5.3,11.9,11.9 C88.3,87.6,83,92.9,76.5,92.9z"}),(0,c.jsx)("ellipse",{transform:"matrix(1.676928e-02 -0.9999 0.9999 1.676928e-02 27.2283 48.9794)",cx:"38.5",cy:"10.6",rx:"8.1",ry:"8.1"})]})})}function y(e){let{className:t,style:n,title:r}=e;return(0,c.jsx)(u,{viewBox:"0 0 56 68",className:"".concat(s().icon," ").concat(s().car," ").concat(null!=t?t:""),style:n,title:r,children:(0,c.jsxs)("g",{transform:"scale(1, 1.4),translate(0,-3)",children:[(0,c.jsx)("path",{d:"M47.1708984,47.4214478c2.4556885,0,4.5087891-1.7954102,4.887207-4.1463623,.0482178-.265686,.0725098-.5313721,.0725098-.8051147s-.024292-.5394287-.0725098-.8051147c-.378418-2.3509521-2.4315186-4.1463623-4.887207-4.1463623-2.4555664,0-4.5004883,1.7954102-4.8789062,4.1463623v.0080566c-.0483398,.2576294-.0725098,.5233154-.0725098,.7970581s.0241699,.5394287,.0725098,.8051147v.0080566c.3864746,2.3428955,2.4233398,4.1383057,4.8789062,4.1383057Z"}),(0,c.jsx)("path",{d:"M16.5200195,37.5184937c-2.4556885,0-4.5007324,1.7954102-4.8790283,4.1463623-.0482178,.265686-.0725098,.5313721-.0725098,.8051147s.024292,.5394287,.0725098,.8051147c.3782959,2.3509521,2.4233398,4.1463623,4.8790283,4.1463623,2.4555664,0,4.4925537-1.7954102,4.8790283-4.1383057v-.0080566c.0482178-.265686,.0723877-.5313721,.0723877-.8051147s-.0241699-.5394287-.0723877-.7970581v-.0080566c-.378418-2.3509521-2.4234619-4.1463623-4.8790283-4.1463623Z"}),(0,c.jsx)("path",{d:"M59.6799316,28.4599609l-11.5998535-2.0699463c-.2000732-.0300293-.380127-.1500244-.5-.3300171l-6.3100586-9.2700195c-.6000977-.8800049-1.6101074-1.4099731-2.6799316-1.4099731H16.1400146c-1.2000732,0-2.2999268,.6499634-2.8599854,1.6999512l-5.1101074,9.460022c-.1098633,.1900024-.2799072,.3400269-.4799805,.3900146l-3.7099609,1.1400146c-1.1699219,.3599854-1.9799805,1.4599609-1.9799805,2.6799927v9.9199829c0,1.539978,1.2600098,2.7999878,2.8000488,2.7999878h5c-.0600586-.3299561-.0800781-.6599731-.0800781-1,0-.3399658,.0200195-.6699829,.0800781-1,.0100098-.039978,.0100098-.0700073,.0200195-.1099854,.5200195-3.2199707,3.3299561-5.6900024,6.6999512-5.6900024s6.1799316,2.4700317,6.6999512,5.6900024v.0200195c.0100098,.0299683,.0100098,.0599976,.0100098,.0899658l.0100098,.0100098c.0600586,.3200073,.0800781,.6500244,.0800781,.9899902,0,.3400269-.0200195,.6700439-.0800781,1l-.0100098,.0100098h17.2299805l-.0100098-.0100098c-.0599365-.3299561-.0799561-.6599731-.0799561-1,0-.3399658,.0200195-.6699829,.0799561-.9899902l.0100098-.0100098c0-.0299683,0-.0700073,.0100098-.0999756v-.0100098c.5200195-3.2299805,3.3300781-5.6900024,6.6999512-5.6900024,3.3701172,0,6.1900635,2.460022,6.710083,5.6900024,.0100098,.039978,.0100098,.0700073,.0200195,.1099854,.0599365,.3300171,.0799561,.6600342,.0799561,1,0,.3400269-.0200195,.6700439-.0799561,1h5.2999268c1.5400391,0,2.8000488-1.2600098,2.8000488-2.7999878v-9.460022c0-1.3599854-.9799805-2.5199585-2.3200684-2.75Zm-30.289917,2.1500244h1.6099854c.5500488,0,1,.4500122,1,1s-.4499512,1-1,1h-1.6099854c-.5499268,0-1-.4500122-1-1s.4500732-1,1-1Zm-16.6700439-2.4500122l4.5900879-8.5h8.8598633v8.5H12.7199707Zm16.6700439,0v-8.5h8.1700439l5.6799316,8.3599854c.0300293,.0500488,.0700684,.1000366,.0900879,.1400146h-13.9400635Z"})]})})}function x(e){let{className:t,style:n,title:r}=e,l=(0,c.jsx)(o.Z,{className:"".concat(s().icon," ").concat(s().info," ").concat(null!=t?t:""),style:n,fontSize:"medium"});return r?(0,c.jsx)(a.u,{title:r,children:l}):l}function g(e){let{className:t,children:n}=e;return(0,c.jsxs)("div",{className:t,children:["Source: ",(0,c.jsx)(l.Z,{href:i.jy,children:"NJ State Police"}),(0,c.jsx)(x,{title:"Fatal crashes only; typically published between a day and a few months after the fact"}),n]})}function j(){return(0,c.jsxs)("div",{children:["Source: ",(0,c.jsx)(l.Z,{href:i.Iv,children:"NJ DOT"}),(0,c.jsx)(x,{title:"Includes non-fatal crashes; most recent data: 2021"})]})}},19418:function(e,t,n){"use strict";n.d(t,{f:function(){return C},l_:function(){return M}});var c=n(52676),r=n(75271),s=n(26665),a=n(99172),o=n(29697).Buffer;async function l(e){let{db:t,table:n,csvText:c}=e;return await t.registerFileText(n,c),t}async function i(e){let t,{db:n,tableData:c,stem:r}=e;if("csv"===c.kind){let e="".concat(r,".csv");t="'".concat(e,"'"),await n.registerFileText(e,c.data)}else{let e="".concat(r,".parquet");t="parquet_scan('".concat(e,"')");let s=new Uint8Array(o.from(c.base64,"base64"));await n.registerFileBuffer(e,s)}return t}var u=n(34273);let d="/njsp/projected.csv",h=(0,s.basename)(d),f=e=>"\n    SELECT\n        CAST(sum(driver) as INT) as driver,\n        CAST(sum(pedestrian) as INT) as pedestrian,\n        CAST(sum(cyclist) as INT) as cyclist,\n        CAST(sum(passenger) as INT) as passenger\n    FROM ".concat(h,"\n    ").concat(e?"WHERE county = '".concat(e,"'"):"","\n"),p=e=>{let{county:t,target:n}=e;return"\n    SELECT\n        year,\n        CAST(sum(driver) as INT) as driver,\n        CAST(sum(pedestrian) as INT) as pedestrian,\n        CAST(sum(cyclist) as INT) as cyclist,\n        CAST(sum(passenger) as INT) as passenger,\n        CAST(sum(driver + pedestrian + cyclist + passenger) as INT) as total,\n        NULL as projected\n    FROM ".concat(n,"\n    ").concat(t?"WHERE county = '".concat(t,"'"):"","\n    GROUP BY year\n")};var m=n(3610),y=n(69906),x=n(42137),g=n(2829),j=n(68976),v=n(48787),w=n(87483),_=n(62249);async function S(e){let{ytRows:t,typeProjections:n,initialPlotData:c,types:r,county:s}=e,a=Array.from(r),o={Drivers:"driver",Pedestrians:"pedestrian",Cyclists:"cyclist",Passengers:"passenger",Projected:"projected"};console.log("typeProjections:",n);let l=a.map(e=>{let t=o[e];return t in n?n[t]:0}).reduce((e,t)=>e+t,0),i={...t[t.length-1]},d=[...t.slice(0,t.length-1),i];if(i.year==u.$B){let e=a.map(e=>i[o[e]]).reduce((e,t)=>e+t,0);i.projected=l-e}else console.warn("getPlotData: last year is not ".concat(u.$B,":"),i," (county: ".concat(s,")")),d.push({year:u.$B,driver:0,pedestrian:0,cyclist:0,passenger:0,total:0,projected:l});let h=1===r.size,f=c.map(e=>{let{name:t}=e,n=o[t],c={...e};return c.x=d.map(e=>e.year),c.y=d.map(e=>e[n]),c.visible=!!r.has(t)||"legendonly",h||(c.textposition="inside"),c}),p=h?[]:d.map(e=>{let{year:t,projected:n}=e,c=a.map(t=>e[o[t]]).reduce((e,t)=>e+t,0);return{x:t,y:c,text:"".concat(c),showarrow:!1,yshift:10}}),m=(0,j.sq)(d.map(e=>{let{year:t,total:n,projected:c}=e;return[t,{total:n,projected:c}]}));return{rows:d,data:f,annotations:p,yearTotalsMap:m}}let C="Car Crash Deaths",b=["Drivers","Pedestrians","Cyclists","Passengers","Projected"],N="https://nbviewer.org/github/".concat(m.Of,"/blob/main/njsp/update-projections.ipynb");function T(e){let{rundate:t,yearTotalsMap:n,county:r,includeMoreInfoLink:s}=e,a=n["2021"].total,o=n["2022"].total,l=n[u.Vz].total,i=n[u.$B];if(!i)return console.warn("NjspChildren: yearTotalsMap doesn't contain ".concat(u.$B,":"),n),null;let{total:d,projected:h}=i,f=d+h,p=new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",timeZone:"UTC"});return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{children:"Click/Double-click the legend labels to toggle or solo each type."}),(0,c.jsxs)("p",{children:[(0,c.jsxs)(y.Z,{href:"".concat(x.Tf.href,"/commits/main"),children:["As of ",p]}),", ",r?"".concat(r," County"):"NJ"," has ",d," reported deaths in ",u.$B,", and ",(0,c.jsx)(y.Z,{href:N,children:"is on pace"})," for ",f,f>l?", exceeding ".concat(u.Vz,"'s ").concat(l):"",".",s?(0,c.jsxs)(c.Fragment,{children:[" ",(0,c.jsxs)(y.Z,{href:"/c/".concat(r?(0,v.F)(r):""),children:["More ",r?"".concat(r," County"):"state-wide"," data"]}),"."]}):null]}),null===r?(0,c.jsxs)("p",{children:["2021 and 2022 were the worst years in the NJSP record (since 2008), with ",a," and ",o," deaths, resp."]}):null,(0,c.jsx)(_.Zk,{})]})}function M(e){let{params:t,tableData:n,typeProjections:o,Counties:m,ytRows:x,rundate:j,yearTotalsMap:v,county:_,title:N,subtitle:M,heading:Z,Heading:A="h2",spec:P,setCounty:D,includeMoreInfoLink:B}=e,{src:J,name:L}=P=null!=P?P:u.xW;J=null!=J?J:"plots/".concat(L,".png");let[k,F]=(0,r.useState)(new Set(b)),z=(0,a.W_)(),{data:E,layout:H,...I}=t,[R,V]=(0,r.useState)(E),[Y,q]=(0,r.useState)(H.annotations),[O]=function(e){let{url:t,db:n,table:c,query:o,init:i}=e,u=function(e){let{db:t,table:n,url:c}=e,[s,a]=(0,r.useState)(null),o=function(e){let{url:t}=e,[n,c]=(0,r.useState)(null);return(0,r.useEffect)(()=>{fetch(t).then(e=>e.text()).then(c)},[t]),n}({url:c});return(0,r.useEffect)(()=>{(async function(){t&&o&&(console.log("registering db table ".concat(n,": ").concat(c)),a(await l({db:t,table:n,csvText:o})))})()},[t,o]),s}({db:n,table:null!=c?c:(0,s.basename)(t),url:t}),[d,h]=(0,r.useState)(i);return(0,r.useEffect)(()=>{(async function(){console.log("querying table ".concat(c)),u&&h(await (0,a.Vn)(u,o))})()},[u,o]),d}({url:d,db:z,table:h,query:f(_),init:[o]}),[Q,W]=(0,r.useState)(v),$=(0,r.useCallback)(e=>{if(k.has(e)){console.log("types: disable ".concat(e));let t=new Set(Array.from(k));t.delete(e),F(t)}else{console.log("types: enable ".concat(e));let t=new Set(Array.from(k));t.add(e),F(t)}return!1},[k]),G=(0,r.useCallback)(e=>(k.size<=1?(console.log("types: remove solo ".concat(e)),F(new Set(b))):(console.log("types: solo ".concat(e)),F(new Set([e]))),!1),[k]),U=function(e){let{db:t,tableData:n,stem:c}=e,[s,a]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async function(){if(!t)return;console.log("got db:",t);let e=await i({db:t,tableData:n,stem:c});console.log("registered target:",e),a(e)})()},[t,n]),s}({db:z,tableData:n,stem:"ytc"}),[X,K]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!z||!U)return;let e=p({county:null!=_?_:null,target:U});console.log("updating ytQuery:",e),K(e)},[z,U,_]);let ee=(0,a.aM)({db:z,query:X,init:x});(0,r.useEffect)(()=>{!async function(){if(!z||!U)return;let{data:e,annotations:t,yearTotalsMap:n}=await S({ytRows:ee,typeProjections:O,initialPlotData:E,types:k,county:_});V(e),q(t),W(n)}()},[z,U,ee,O,E,k,_]);let et=(0,r.useMemo)(()=>{let{xaxis:e,yaxis:t,...n}=H;return{...n,xaxis:{...e,fixedrange:!0},yaxis:{...t,fixedrange:!0},dragmode:!1,annotations:Y,margin:{t:0,r:10,b:0,l:0}}},[H,Y]);return N=null!=N?N:C,(0,c.jsx)(g.XN,{...P,params:{data:R,layout:et,...I},src:J,title:N,subtitle:M,heading:null!=Z?Z:D?(0,c.jsxs)(A,{children:[(0,c.jsx)(y.Z,{href:"#".concat(P.id),children:N}),":",(0,c.jsx)(w.RY,{county:_,setCounty:D,Counties:m})]}):null,onLegendClick:$,onLegendDoubleClick:G,children:(0,c.jsx)(T,{rundate:j,yearTotalsMap:Q,county:_,includeMoreInfoLink:B})})}},34273:function(e,t,n){"use strict";n.d(t,{$B:function(){return i},Vv:function(){return p},Vz:function(){return u},xW:function(){return f}});var c=n(52676);n(75271);var r=n(2829),s=n(69906),a=n(62249),o=n(40),l=n.n(o);let i=new Date().getFullYear(),u=i-1,d=[],h=d.concat(...["y","m"].map(e=>d.concat(...["s","c"].map(t=>d.concat(...["d","i","p"].map(n=>{let c="".concat(n).concat(t).concat(e),r={s:"State",c:"County"}[t],s={y:"Year",m:"Month"}[e],a="".concat({s:"State",c:"Counties"}[t]," x ").concat(s,"s"),o={i:"Traffic Crash Injuries",p:"Property Damage Crashes",d:"Traffic Deaths"}[n],l="State"==r?"NJ ".concat(o," per ").concat(s):"NJ ".concat(o," per {").concat(r,", ").concat(s,"}");return"dcm"==c&&(l+=" (12mo avgs)"),{id:c,name:"njdot/".concat(c),title:l,menuName:({i:"Injuries",p:"Property Damage",d:"Deaths"})[n],dropdownSection:a,style:"County"==r&&{height:580}}})))))),f={title:"NJ Traffic Deaths per Year",id:"per-year",name:"fatalities_per_year_by_type",menuName:"Traffic Deaths / Year",dropdownSection:"NJSP"},p=[f,{id:"ytd",name:"ytd-deaths",title:"NJ Traffic Deaths per Year",menuName:"YTD",dropdownSection:"NJSP",filter:r._c,children:(0,c.jsx)(a.Zk,{className:l().ytdFooter,children:(0,c.jsx)("p",{children:"Some data arrives weeks or months after the fact, so current year numbers are especially subject to change."})})},{id:"vs-homicides",name:"crash_homicide_cmp",title:"NJ Traffic Deaths vs. Homicides",menuName:"vs. Homicides",dropdownSection:"NJSP",children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{children:"Traffic crashes kill 1.5-2x as many people as homicides in NJ."}),(0,c.jsxs)("p",{children:["Homicide data comes from ",(0,c.jsx)(s.Z,{href:"https://nj.gov/njsp/ucr/uniform-crime-reports.shtml",children:"NJ State Police"})," and ",(0,c.jsx)(s.Z,{href:"https://www.disastercenter.com/crime/njcrimn.htm",children:"Disaster Center"}),"."]})]})},{id:"per-month",name:"fatalities_per_month",title:"NJ Traffic Deaths per Month",menuName:"Per Month",dropdownSection:"NJSP"},{id:"by-month-bars",name:"fatalities_by_month_bars",title:"NJ Traffic Deaths, grouped by month",menuName:"Grouped by Month",dropdownSection:"NJSP"},...h]},42137:function(e,t,n){"use strict";n.d(t,{Tf:function(){return s},fQ:function(){return i},UY:function(){return l}});var c=n(84799);n(876),n(25290);var r=n(3610);let s=c.Tf(r.Of,"svg"),a=c.tL("hudcostreets"),o=c.mr("hudcostreets"),l=[s,c._F("@neighborryan"),a,o],i="crash-data@hudcostreets.org"},61128:function(e,t,n){"use strict";n.d(t,{u:function(){return s}});var c=n(52676),r=n(33588);function s(e){let{enterTouchDelay:t=0,leaveTouchDelay:n=3e3,enterNextDelay:s=0,offset:a=14,arrow:o=!0,...l}=e;return(0,c.jsx)(r.Z,{arrow:o,slotProps:{popper:{modifiers:[{name:"offset",options:{offset:[0,-a]}}]}},enterTouchDelay:t,leaveTouchDelay:n,enterNextDelay:s,...l})}},22764:function(e,t,n){"use strict";n.d(t,{Iv:function(){return o},jy:function(){return a},mB:function(){return l}});var c=n(44889),r=n(68976),s=n(86001);let a="https://nj.gov/njsp/info/fatalacc/",o="https://www.state.nj.us/transportation/refdata/accident/rawdata01-current.shtm";function l(){let{local:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e){let{local:t,name:n,urls:a}=e,o=s.cwd(),l=t?"".concat(o,"/public/").concat(n):"".concat((0,c.b)(),"/").concat(n),i=s.env.S3_DBS?"https://nj-crashes.s3.amazonaws.com/".concat(n,"/data"):l;return(0,r.Q8)(a,(e,t)=>"".concat(i,"/").concat(t))}({local:e,name:"njdot",urls:{crashes:"crashes.db",occupants:"occupants.db",pedestrians:"pedestrians.db",vehicles:"vehicles.db",drivers:"drivers.db",cmym:"cmym.db",cmymc:"cmymc.db"}})}},18715:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var c=n(48787),r=n(75271),s=n(68976),a=n(38272),o=n(99788);function l(e){let{cc2mc2mn:t,urlPrefix:n,...l}=e,i=(0,o.useRouter)(),u=(0,r.useMemo)(()=>(0,s.V7)(t,(e,t)=>{let{cn:n}=t;return[n,e]}),[t]),[d,h]=(0,r.useState)(l.cc),[f,p]=(0,r.useState)(l.mc),m=(0,r.useCallback)(e=>{if(!n||!e.startsWith(n+"/"))return!0;let[r,a]=(e=e.slice(n.length+1)).split("/").map(e=>e?(0,c.c)(e):void 0);if(console.log("useRegion: updateCodes url ".concat(e," cn ").concat(r," mn ").concat(a)),!r)return console.log("beforePopState setting cc ".concat(null)),h(null),!0;{let e=u[r];if(console.log("beforePopState setting cc ".concat(e)),h(e),!a)return console.log("beforePopState setting mc ".concat(null)),p(null),!0;{let{mc2mn:n}=t[e],c=(0,s.V7)(n,(e,t)=>[t,e])[a];return console.log("beforePopState setting mc ".concat(c)),p(c),!0}}},[n,h,p,u,t]);(0,r.useEffect)(()=>{if(!n)return;i.beforePopState(e=>{let{url:t,as:n,options:c}=e;return m(n)});let e=(e,t)=>{let{shallow:n}=t;m(e)};return i.events.on("routeChangeStart",e),()=>{i.events.off("routeChangeStart",e)}},[i,n,m]);let y=(0,r.useCallback)(e=>{let t=e?u[e]:null;if(console.log("new cc",t),h(t),void 0!==n){let t="".concat(n,"/").concat(e?(0,c.F)(e):"");console.log("pushing ".concat(t)),i.push(t,void 0,{shallow:!0})}},[u,h,n]),{county:x,cn:g,mn:j,mc2mn:v,mn2mc:w,cities:_}=(0,r.useMemo)(()=>{if(!d)return{};let e=t[d],{cn:n,mc2mn:c}=e,r=(0,s.V7)(c,(e,t)=>[t,e]),o=(0,a.Wt)((0,s.XP)(r));return{county:e,cn:n,mn:c&&f?c[f]:void 0,mc2mn:c,mn2mc:r,cities:o}},[d,t]),S=(0,r.useCallback)(e=>{if(!w){console.warn("Attempting to select city ".concat(e," with no mn2mc (cc ").concat(d,")"));return}if(p(w[e]),void 0!==n&&g){let t="".concat(n,"/").concat((0,c.F)(g),"/").concat((0,c.F)(e));console.log("pushing ".concat(t)),i.push(t,void 0,{shallow:!0})}},[p,n,g,w]);return{cn:g,mn:j,county:x,cc:d,mc:f,mc2mn:v,setCounty:y,setCity:d?S:void 0,cities:_,cc2mc2mn:t}}},40:function(e){e.exports={container:"index_container__9GuY8",index:"index_index__0Bnxq",title:"index_title__a_HQY","plot-container":"index_plot-container__NCtTQ",map:"index_map__G_wnO",bold:"index_bold__yXydk",ytdFooter:"index_ytdFooter__BcqKp"}},77779:function(e){e.exports={countySelect:"county-select_countySelect__rwRfM"}},98999:function(e){e.exports={footer:"footer_footer__gb1e2"}},37392:function(e){e.exports={icon:"icons_icon__nBWSs",driver:"icons_driver__Actj4",pedestrian:"icons_pedestrian__lR5Dh",cyclist:"icons_cyclist__uXs6N",car:"icons_car__c6vpg",info:"icons_info__P_fm_"}}}]);