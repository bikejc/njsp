(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{58588:function(e,t,n){e.exports=n(13035)},62400:function(e,t,n){"use strict";var r,o;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(36443)},59938:function(e,t,n){"use strict";n.r(t),n.d(t,{DefaultDbPath:function(){return m},DefaultQuery:function(){return g},Input:function(){return v},QueryKey:function(){return p},UrlKey:function(){return h},default:function(){return y}});var r=n(11527),o=n(50959),c=n(8699),u=n(84334),l=n.n(u),s=n(68325),i=n(23007),a=n(56164);function f(e){let{result:t}=e;return t&&(0,a.g_)(e=>(0,r.jsxs)("div",{className:l().sqlError,children:[(0,r.jsx)("h2",{children:"Error"}),(0,r.jsx)("pre",{children:e.message})]}),e=>(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:(null==e?void 0:e.length)?(0,i.XP)(e[0]).map((e,t)=>(0,r.jsx)("th",{children:e},t)):null})}),(0,r.jsx)("tbody",{children:null==e?void 0:e.map((e,t)=>(0,r.jsx)("tr",{children:(0,i.VO)(e).map((e,t)=>(0,r.jsx)("td",{children:e},t))},t))})]}))(t)}var d=n(41796);let h="sql-db-url",p="sql-query";function v(e){let{label:t,defaultValue:n,buttons:c,...u}=e,[s,i]=(0,o.useState)(n);(0,o.useEffect)(()=>{i(n)},[n]);let[a,f]=(0,o.useState)(null),d=(0,o.createRef)();return(0,o.useEffect)(()=>{d.current&&(console.log("set initial scrollHeight"),f(d.current.scrollHeight))},[d.current]),(0,r.jsxs)("div",{className:l().control,children:[(0,r.jsxs)("label",{children:[t,(0,r.jsx)("textarea",{ref:d,style:a?{height:"".concat(a,"px")}:{},value:s,onInput:e=>{f(e.target.scrollHeight)},onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.code&&e.shiftKey&&(e.preventDefault(),c[0].cb(s))},...u})]}),c.map(e=>{let{value:t,cb:n}=e;return(0,r.jsx)("input",{type:"button",value:t,className:l().updateButton,onClick:()=>{n(s)}},t)})]})}let m=(0,d.mB)().crashes,g="select * from crashes where id=100000";function y(){let[e,t]=(0,c.Z)(h,{defaultValue:"".concat(m)}),[n,u]=(0,c.Z)(p,{defaultValue:g}),[l,i]=(0,o.useState)(65536),[a,d]=(0,o.useState)(null),y=null;try{y=(0,s.o8)({url:e,requestChunkSize:l,setResult:d})}catch(e){console.error("Caught error:",e)}return(0,r.jsxs)("div",{children:[(0,r.jsx)(v,{label:"DB URL:",buttons:[{value:"Update",cb:e=>{console.log("Updating URL:",e),t(e)}}],defaultValue:e}),(0,r.jsx)(v,{label:"Query:",buttons:[{value:"Run",cb:e=>{if(u(e),y){let t=e.split(";\n\n");t.length>1?(console.log("Running ".concat(t.length," queries")),t.reduce((e,t)=>y&&e?e.then(()=>{var e;return console.log("Running query:",t),y&&(null!==(e=y(t))&&void 0!==e?e:Promise.resolve())}):null,Promise.resolve())):(console.log("Running query:",e),y(e))}}},{value:"Explain",cb:e=>{u(e);let t="explain query plan ".concat(e);console.log("Running query:",t),y&&y(t)}}],defaultValue:n}),(0,r.jsx)(f,{result:a})]})}},41796:function(e,t,n){"use strict";n.d(t,{Iv:function(){return u},jy:function(){return c},mB:function(){return l}});var r=n(21358),o=n(62400);let c="https://nj.gov/njsp/info/fatalacc/",u="https://www.state.nj.us/transportation/refdata/accident/rawdata01-current.shtm";function l(){let e=o.env.S3_DBS?"https://nj-crashes.s3.amazonaws.com/njdot/data":"".concat((0,r.b)(),"/njdot");return{crashes:"".concat(e,"/crashes.db"),occupants:"".concat(e,"/occupants.db"),pedestrians:"".concat(e,"/pedestrians.db"),vehicles:"".concat(e,"/vehicles.db"),drivers:"".concat(e,"/drivers.db"),cmym:"".concat(e,"/cmym.db"),cmymc:"".concat(e,"/cmymc.db")}}},84334:function(e){e.exports={control:"sql-repl_control__baLnI"}},36443:function(e){!function(){var t={229:function(e){var t,n,r,o=e.exports={};function c(){throw Error("setTimeout has not been defined")}function u(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===c||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:c}catch(e){t=c}try{n="function"==typeof clearTimeout?clearTimeout:u}catch(e){n=u}}();var s=[],i=!1,a=-1;function f(){i&&r&&(i=!1,r.length?s=r.concat(s):a=-1,s.length&&d())}function d(){if(!i){var e=l(f);i=!0;for(var t=s.length;t;){for(r=s,s=[];++a<t;)r&&r[a].run();a=-1,t=s.length}r=null,i=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===u||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new h(e,t)),1!==s.length||i||l(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var c=n[e]={exports:{}},u=!0;try{t[e](c,c.exports,r),u=!1}finally{u&&delete n[e]}return c.exports}r.ab="//";var o=r(229);e.exports=o}()},21358:function(e,t,n){"use strict";n.d(t,{b:function(){return c}});var r=n(58588);let o=r.default||r;function c(){let{publicRuntimeConfig:e}=o();if(!e)return"";let{basePath:t=""}=e;return t}}}]);